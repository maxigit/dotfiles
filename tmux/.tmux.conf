#set -g prefix C-k
#bind C-k send-prefix
bind @ command-prompt "joinp -t:##"
# set session current directory to active pane
bind P attach-session -t . -c "#{pane_current_path}"
bind C-c new-window -c "#{pane_current_path}"
set -g mouse
set -g status off
#set terminal titles
set-option -g set-titles on
set-option -g set-titles-string ":#S:(#W) #{pane_path}"
set-option -ag set-titles-string "<span background=\"black\" foreground=\"#ff0\"> #{window_index}/#{session_windows}</span>"
set-option -ag set-titles-string "<span background=\"black\" foreground=\"#f80\">.#{pane_index}/#{window_panes}</span>"
set-option -ag set-titles-string "<span background=\"black\" foreground=\"#f00\">#{?window_zoomed_flag, Zoomed,} </span>"
set-option -ag set-titles-string "<span background=\"black\" foreground=\"#f00\">#{?monitor-silence, Silence!,} </span>"
set-option -ag set-titles-string "<span background=\"black\" foreground=\"#f00\">#{?monitor-activity, Activity!,} </span>"
set -g base-index 1

# 24 bit colors
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",*256col*:Tc"
# panel separator color
set -g pane-border-style fg=black
set -g pane-active-border-style fg=black,bg=red

set-window -g  main-pane-height 50

set-window -g  main-pane-width 200

# feel free to change the "1" to however many lines you want to resize by, only
# one at a time can be slow
bind < resize-pane -L 5
bind > resize-pane -R 5
bind - resize-pane -D 5
bind + resize-pane -U 5


# Create mapping starting with C-L
## Not used , not faster than just C-s
# bind-key -Troot C-l switch-client -TtableL
# bind-key -TtableL C-l send-keys C-l
# Keys to switch session. 
bind -TtableL 0 switchc -t0- 
bind -TtableL 1 switchc -t1-
bind -TtableL 2 switchc -t2-
bind -TtableL 3 switchc -t3-
bind -TtableL 4 switchc -t4-
bind -TtableL 5 switchc -t5-
bind -TtableL 6 switchc -t6-
bind -TtableL 7 switchc -t7-
bind -TtableL 8 switchc -t8-
bind -TtableL 9 switchc -t9-


bind S new-session

bind v select-layout main-horizontal
bind V select-layout even-vertical
bind h select-layout main-vertical
bind H select-layout even-horizontal
bind t select-layout tiled


# Only current session windows
bind-key -r -T prefix w run-shell 'tmux choose-tree -Nwf"##{==:##{session_name},#{session_name}}"'

bind-key W choose-tree # All windows

# Monitor activity
set -g visual-activity both
set -g visual-silence both
set -g activity-action any
set -g silence-action any
set-hook -g alert-activity 'set monitor-activity off # disable activity'
set-hook -g alert-activity[1] "run-shell 'notify-send -i terminal ACTIVITY #{hook_session_name}:#{hook_window_name}'"
set-hook -g alert-silence 'set monitor-silence 0 # disable activity'
set-hook -g alert-silence[1] "run-shell 'notify-send -i terminal SILENCE #{hook_session_name}:#{hook_window_name}'"
bind a set monitor-silence 20
bind A set monitor-activity on

#kset -g status-style bg=colour234
#kset -g status-left-length 60
#kset -g status-left "#[bg=magenta] $USER#[fg=blue]@#[fg=black]mae #[bg=black]#[fg=black] #[fg=black]#[bg=magenta]#(rainbarf --tmux --width 10  )#[bg=black]#[fg=black] #[fg=black]#[bg=colour22]\#[bg=default] [#S] #[fg=white]#I#[fg=black] "
#k
#kset -g status-justify left
#k
#k
#kset -g status-right-length 120
#kset -g status-right "#[bg=default] #[fg=red]#P#[fg=black] #[bg=black]#[fg=black] #[fg=black]#[bg=default]#[bg=colour22]#[bg=#ff8800]#[fg=red]#(task active  | head -4|tail -1|  tr -s [:blank:])#[fg=black] #(cat ~/.thyme-tmux) #[bg=colour22]#[bg=black]#[fg=black] #[fg=black]#[bg=colour22] \
#k%a %d-%b-%Y #[fg=white]%H:%M#[fg=black] "
#kset -g status-interval 1
#k

bind-key F command-prompt "find-window -Z -- '%%'" # normally f
set -g @fingers-pattern-0 '[-a-zA-Z0-9.]{4,}'
set -g @fingers-keyboard-layout 'colemak'
set -g @fingers-key 'f'
set -g @fingers-hint-format "#[fg=red,bg=white]%s"
set -g @fingers-main-action :paste:
set -g @fingers-shift-action :copy:
run-shell ~/.tmux/plugins/tmux-fingers/tmux-fingers.tmux
set -g @tmux-fzf-launch-key 'C-n'
run-shell ~/.tmux/plugins/tmux-fzf/main.tmux
bind-key "C-w" run-shell -b "~/.tmux/plugins/tmux-fzf/scripts/window.sh switch"
#new-session -A -s fames -c /home/max/devel/mae/Fames
#new-session -A -s fa -c /home/max/devel/mae/fa
#  set status-style bg=#eb34cf,fg=black
#new-session -A -s mae -c /home/max/devel/mae
#  set status-style bg=#ff8800,fg=black
#  new-window -n Dump -c /home/max/devel/mae/dumps
#new-session -A -s DC2 -c /home/max/devel/DC2/
#  set status-style bg=#008888,fg=white
#  new-window -n custom -c /home/max/devel/DC2/custom/mae/
#new-session -A -s Work -c /home/max/.vim
#  set status-style bg=black,fg=white
#  new-window -n plugin -c /home/max/.vim/pack/misc  
#  new-window -n org -c /home/max/org
#new-session -A -s prod -c /home/max/prod/prod-fames/
#  set status-style bg=#880000,fg=white
# 
run-shell ~/.tmux/plugins/tmux-resurrect/resurrect.tmux
   set -g @resurrect-processes 'false'

# TMUX_COLORTAG_ROUNDED_POWERLINE="yes"
TMUX_COLORTAG_USE_POWERLINE="yes"
run-shell ~/.tmux/plugins/tmux-colortag/tmux-colortag.tmux

bind-key Z "set status"
