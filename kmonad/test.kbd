(defcfg
  ;; For Linux
  input  (device-file "/dev/input/by-id/usb-05f3_0007-event-kbd")
  output (uinput-sink "My KMonad output"
    ;; To understand the importance of the following line, see the section on
    ;; Compose-key sequences at the near-bottom of this file.
    "sleep 1 && setxkbmap -option compose:ralt")
  cmp-seq ralt  ;; Set the compose key to `RightAlt'

  ;; For Windows
  ;; input  (low-level-hook)
  ;; output (send-event-sink)

  ;; For MacOS
  ;; input  (iokit-name "my-keyboard-product-string")
  ;; output (kext)

  ;; Comment this is you want unhandled events not to be emitted
  fallthrough true

  ;; Set this to false to disable any command-execution in KMonad
  allow-cmd true
)



(defsrc
  =    1    2    3    4    5    6    7    8    9    0    -
  tab  q    w    e    r    t    y    u    i    o    p    [
  caps a    s    d    f    g    h    j    k    l    ;    '
  lsft z    x    c    v    b    n    m    ,    .    /    rsft
  grv  102d left rght                     down up   \    = 
  bspc lmet end                                pgup pgdn 
  rctl esc lalt                                ralt ret  spc
)



(defalias
  ;; num  (layer-toggle numbers) ;; Bind num to a button that switches to a layer
  ;; tnum (tap-hold-next 200 tab @num)
  tab (tap-hold-next 200 tab (layer-toggle tabbed))
  cap (tap-hold-next 200 caps (layer-toggle extend))
  csp (tap-hold-next 200 spc ctl)
  sr (tap-hold-next 200 ret rsft)
  sl (tap-hold-next 200 esc lsft)
  q C-spc
)


(deflayer dvorak
  ]    1    2    3    4    5    6    7    8    9    0    [
  @tab '    ,    .    p    y    f    g    c    r    l    /
  @cap a    o    e    u    i    d    h    t    n    s    -
  @sl  ;    q    j    k    x    b    m    w    v    z    @sr 
  grv  102d left right                    down up   \    = 
  bspc lmet end                                pgup pgdn
  @csp esc lalt                                ralt ret  spc
)


(deflayer tabbed
  XX   XX   XX   XX   XX   XX   XX   nlck =    kp/  kp*  XX
  XX   XX   XX   XX   XX   XX   XX   kp7  kp8  kp9  kp-  XX
  XX   XX   XX   XX   @q   XX   kp.  kp4  kp5  kp6  kp+  XX
  XX   XX   XX   XX   XX   XX   kp0  kp1  kp2  kp3  kprt XX
  XX   XX   XX   XX                  kp0  kp0  kp.  kprt
  XX   XX   XX                                 XX   XX  
  XX   XX   XX                                 XX   XX   XX 
)


(deflayer extend
  XX   XX   XX   XX   XX   XX   XX   XX   XX   XX   XX   XX
  XX   XX   XX   XX   XX   XX   home pgdn pgup end  XX   XX
  XX   XX   XX   XX   XX   XX   left down up   rght bspc   XX
  XX   XX   XX   XX   XX   XX   XX   [    ]    :    esc  XX
  XX   XX   XX   XX                       XX   XX   XX   XX
  XX   XX   XX                                 XX   XX  
  XX   XX   XX                                 XX   XX   XX 
)
